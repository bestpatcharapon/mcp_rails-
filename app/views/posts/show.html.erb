<% content_for :title, "#{@post.title} - Posts" %>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    background: #000000;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    color: #e7e9ea;
    line-height: 1.5;
  }

  .layout {
    display: grid;
    grid-template-columns: 1fr minmax(600px, 900px) 1fr;
    min-height: 100vh;
  }

  .sidebar-left, .sidebar-right {
    border-color: #2f3336;
  }

  .sidebar-left {
    border-right: 1px solid #2f3336;
  }

  .sidebar-right {
    border-left: 1px solid #2f3336;
  }

  .main-content {
    border-left: 1px solid #2f3336;
    border-right: 1px solid #2f3336;
  }

  .header {
    position: sticky;
    top: 0;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(12px);
    padding: 0.75rem 1.5rem;
    border-bottom: 1px solid #2f3336;
    z-index: 100;
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .back-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    color: #e7e9ea;
    text-decoration: none;
    transition: background 0.2s;
  }

  .back-btn:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  .header h1 {
    font-size: 1.25rem;
    font-weight: 700;
    color: #e7e9ea;
  }

  .notice {
    background: rgba(29, 155, 240, 0.1);
    border: 1px solid rgba(29, 155, 240, 0.3);
    color: #1d9bf0;
    padding: 0.75rem 1.5rem;
    font-size: 0.9rem;
  }

  .post-detail {
    padding: 1.5rem;
  }

  .post-header {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #1d9bf0, #1a8cd8);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 1.5rem;
    color: #fff;
    flex-shrink: 0;
  }

  .author-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .author-name {
    font-weight: 700;
    color: #e7e9ea;
    font-size: 1.1rem;
  }

  .author-handle {
    color: #71767b;
    font-size: 0.95rem;
  }

  .post-title {
    font-size: 1.75rem;
    font-weight: 700;
    color: #e7e9ea;
    margin-bottom: 1rem;
    line-height: 1.3;
  }

  .post-content {
    font-size: 1.15rem;
    color: #e7e9ea;
    line-height: 1.75;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .post-timestamp {
    margin-top: 1.5rem;
    padding-top: 1rem;
    border-top: 1px solid #2f3336;
    color: #71767b;
    font-size: 0.95rem;
  }

  .post-stats {
    display: flex;
    gap: 2rem;
    padding: 1rem 0;
    border-bottom: 1px solid #2f3336;
  }

  .stat {
    font-size: 0.95rem;
  }

  .stat-value {
    font-weight: 700;
    color: #e7e9ea;
  }

  .stat-label {
    color: #71767b;
  }

  .post-actions {
    display: flex;
    gap: 2rem;
    padding: 1rem 0;
    border-bottom: 1px solid #2f3336;
  }

  .action-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: #71767b;
    background: none;
    border: none;
    padding: 0.75rem 1.25rem;
    border-radius: 9999px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.95rem;
    text-decoration: none;
    font-weight: 500;
  }

  .action-btn:hover {
    color: #1d9bf0;
    background: rgba(29, 155, 240, 0.1);
  }

  .action-btn.danger:hover {
    color: #f91880;
    background: rgba(249, 24, 128, 0.1);
  }

  .action-icon {
    width: 20px;
    height: 20px;
  }

  @media (max-width: 1200px) {
    .layout {
      grid-template-columns: 1fr;
    }
    .sidebar-left, .sidebar-right {
      display: none;
    }
  }
</style>

<div class="layout">
  <aside class="sidebar-left"></aside>
  
  <main class="main-content">
    <div class="header">
      <%= link_to posts_path, class: "back-btn" do %>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      <% end %>
      <h1>Post</h1>
    </div>

    <% if notice.present? %>
      <div class="notice"><%= notice %></div>
    <% end %>

    <article class="post-detail">
      <div class="post-header">
        <div class="avatar"><%= @post.author.to_s.first.upcase rescue "?" %></div>
        <div class="author-info">
          <span class="author-name"><%= @post.author %></span>
          <span class="author-handle">@<%= @post.author.to_s.downcase.gsub(' ', '_') %></span>
        </div>
      </div>

      <h2 class="post-title"><%= @post.title %></h2>
      <div class="post-content"><%= @post.content %></div>

      <div class="post-timestamp">
        <%= @post.created_at.strftime("%l:%M %p Â· %B %d, %Y") %>
      </div>

      <div class="post-stats">
        <div class="stat">
          <span class="stat-value"><%= @post.content.to_s.split.size %></span>
          <span class="stat-label"> Words</span>
        </div>
        <div class="stat">
          <span class="stat-value"><%= @post.content.to_s.length %></span>
          <span class="stat-label"> Characters</span>
        </div>
      </div>

      <div class="post-actions">
        <%= link_to edit_post_path(@post), class: "action-btn" do %>
          <svg class="action-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
          <span>Edit</span>
        <% end %>
        <%= button_to @post, method: :delete, class: "action-btn danger", data: { turbo_confirm: "Delete this post?" }, form: { style: "display: inline" } do %>
          <svg class="action-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
          </svg>
          <span>Delete</span>
        <% end %>
      </div>
    </article>
  </main>

  <aside class="sidebar-right"></aside>
</div>
